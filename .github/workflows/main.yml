name: Terraform
run-name: Terraform
on: [push]
jobs:
  Plan:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./terraform
    steps:
      - uses: Scalr/scalr-action@v1
        with:
          scalr_hostname: "chammock.scalr.io"
          scalr_token: ${{ secrets.SCALR_TOKEN }}
          scalr_workspace: ws-v0o0gjm3bn049ettu
          terraform_output: true
      - run: ls
      - run: pwd
      - run: terraform init
      - run: terraform plan
      - run: echo "${{ steps.plan.outputs.stdout }}"
      - run: echo "${{ steps.plan.outputs.stderr }}"
      - run: echo "${{ steps.plan.outputs.exitcode }}"
